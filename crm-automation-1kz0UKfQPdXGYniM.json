{"createdAt":"2025-06-27T09:41:16.583Z","updatedAt":"2025-06-29T17:42:40.848Z","id":"1kz0UKfQPdXGYniM","name":"CRM Automation","active":false,"isArchived":false,"nodes":[{"parameters":{"amount":2,"unit":"minutes"},"id":"ffc49d7b-c39c-4be2-b173-e77637bb734f","name":"Wait","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-2500,-3200],"webhookId":"80f46cdf-ef90-45da-9c65-a3737782e5aa"},{"parameters":{"mode":"combine","combineBy":"combineAll","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3,"position":[-3400,-3260],"id":"0cb269ad-3197-4064-95b6-2e2ea6975ade","name":"Merge","alwaysOutputData":true},{"parameters":{"mode":"runOnceForEachItem","jsCode":"if (Object.keys($json).length === 0) {\n  // If the current item's JSON is empty, return a single object with \"not ready\" status.\n  return { json: { status: \"not ready\" } };\n} else {\n  // Otherwise, simply return the current item unchanged.\n  return { json: $json };\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2960,-3280],"id":"f2de7c6b-ae38-4c81-8881-fd29321f53fc","name":"Verify Dataset Availability"},{"parameters":{"url":"=https://api.apify.com/v2/datasets/{{ $('Apollo Lead Scraper').item.json.data.defaultDatasetId }}/items?format=json","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Bearer [INPUT YOUR API HERE]"}]},"options":{}},"id":"aa144cca-c395-4476-97da-772538d7d954","name":"Retrieve Dataset","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3180,-3280],"alwaysOutputData":true,"onError":"continueRegularOutput"},{"parameters":{"method":"POST","url":"=https://api.apify.com/v2/acts/curious_coder~apollo-io-scraper/runs?token=[INPUT YOUR API HERE]","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Bearer [INPUT YOUR API HERE]"}]},"sendBody":true,"specifyBody":"json","jsonBody":"=[INPUT APIFY JSON BODY HERE]","options":{}},"id":"ff2ecbce-deaa-4e78-992b-b9bc52473af3","name":"Apollo Lead Scraper","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3620,-3280],"onError":"continueRegularOutput"},{"parameters":{"operation":"create","base":{"__rl":true,"value":"appagq2sJMfQqekZv","mode":"list","cachedResultName":"Skool | Leads","cachedResultUrl":"https://airtable.com/appagq2sJMfQqekZv"},"table":{"__rl":true,"value":"tble3Uzh7FGpVFGm9","mode":"list","cachedResultName":"Leads | Outbound","cachedResultUrl":"https://airtable.com/appagq2sJMfQqekZv/tble3Uzh7FGpVFGm9"},"columns":{"mappingMode":"defineBelow","value":{"Start Lead Enrichment":false,"First Name":"={{ $json.first_name }}","Last Name":"={{ $json.last_name }}","Lead Status":"Yet To Be Enriched","LinkedIn URL":"={{ $json.linkedin_url }}","Title":"={{ $json.title }}","Email Address":"={{ $json.email }}","Company Name":"={{ $json.organization_name }}","Location":"={{ $json.account.city }}, {{ $json.account.state }}, {{ $json.account.country }}","LinkedIn Company URL":"={{ $json.account.linkedin_url }}","Company Website":"={{ $json.account.website_url }}","Time At Company":"=","Industry":"={{ $json.account.industries[0] }}"},"matchingColumns":[],"schema":[{"id":"First Name","displayName":"First Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Last Name","displayName":"Last Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Start Lead Enrichment","displayName":"Start Lead Enrichment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"boolean","readOnly":false,"removed":false},{"id":"Lead Status","displayName":"Lead Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Yet To Be Enriched","value":"Yet To Be Enriched"},{"name":"Cold","value":"Cold"},{"name":"Warm","value":"Warm"},{"name":"Meeting Booked","value":"Meeting Booked"},{"name":"Proposal Sent","value":"Proposal Sent"},{"name":"Client Closed","value":"Client Closed"},{"name":"Lost ","value":"Lost "}],"readOnly":false,"removed":false},{"id":"Email Address","displayName":"Email Address","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Time At Company","displayName":"Time At Company","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Company Name","displayName":"Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Cleaned Company Name","displayName":"Cleaned Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Industry","displayName":"Industry","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Location","displayName":"Location","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"LinkedIn URL","displayName":"LinkedIn URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"LinkedIn Company URL","displayName":"LinkedIn Company URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Company Website","displayName":"Company Website","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Meeting Date","displayName":"Meeting Date","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Google Meet URL","displayName":"Google Meet URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Summary","displayName":"Summary","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Personalization","displayName":"Personalization","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Instantly Camp. ID","displayName":"Instantly Camp. ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Date Lead Enriched","displayName":"Date Lead Enriched","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-2280,-3380],"id":"6d382871-7302-4bce-9644-c59d8701a9f5","name":"Add Leads to CRM","credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}}},{"parameters":{"operation":"removeItemsSeenInPreviousExecutions","dedupeValue":"={{ $json.email }}","options":{"historySize":10000}},"id":"c47a7195-1e15-471f-950d-1e08f9000aa4","name":"Remove Duplicates","type":"n8n-nodes-base.removeDuplicates","typeVersion":2,"position":[-2500,-3380]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"91dd9b4c-3c7c-46bb-a2e6-e9af0e72c425","leftValue":"={{ $json.message.content.is_b2b_focused }}","rightValue":"yes","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-2680,-1220],"id":"715d38c1-f521-41e8-a416-aeea55b1bd7e","name":"B2B?"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"5c95f34f-453c-49f5-9e9a-24a4962e64c1","leftValue":"={{ $json.message.content.number_of_employees }}","rightValue":51,"operator":{"type":"number","operation":"lt"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-2460,-1320],"id":"0c40c0e4-22fa-40da-8b46-86b262fe5461","name":"<50?"},{"parameters":{"operation":"update","base":{"__rl":true,"value":"appjL8npjjAXSREaJ","mode":"list","cachedResultName":"NorthFlow CRM","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ"},"table":{"__rl":true,"value":"tblZlAcevMv5oyJzu","mode":"list","cachedResultName":"Leads","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ/tblZlAcevMv5oyJzu"},"columns":{"mappingMode":"defineBelow","value":{"id":"={{ $('Current Lead').item.json.id }}","Lead Status":"Not Qualified","Notes":"=Bad fit: {{ $json.message.content.b2b_focus_explanation }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"First Name","displayName":"First Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Full Name","displayName":"Full Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Start Lead Enrichment","displayName":"Start Lead Enrichment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"boolean","readOnly":false,"removed":true},{"id":"Lead Status","displayName":"Lead Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Yet to Be Enriched","value":"Yet to Be Enriched"},{"name":"Cold","value":"Cold"},{"name":"Warm","value":"Warm"},{"name":"Meeting Booked","value":"Meeting Booked"},{"name":"Proposal Sent","value":"Proposal Sent"},{"name":"Partner Closed","value":"Partner Closed"},{"name":"Lost","value":"Lost"},{"name":"Not Qualified","value":"Not Qualified"}],"readOnly":false,"removed":false},{"id":"Email Address","displayName":"Email Address","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Time at Company","displayName":"Time at Company","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Raw Company Name","displayName":"Raw Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Cleaned Company Name","displayName":"Cleaned Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Industry","displayName":"Industry","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Construction/trade SaaS ","value":"Construction/trade SaaS "}],"readOnly":false,"removed":true},{"id":"Company Location","displayName":"Company Location","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Personal LinkedIn URL","displayName":"Personal LinkedIn URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Linkedin URL","displayName":"Company Linkedin URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Website","displayName":"Company Website","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Meeting Date","displayName":"Meeting Date","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Google Meet URL","displayName":"Google Meet URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Lead Summary","displayName":"Lead Summary","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Icebreaker","displayName":"Icebreaker","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"PS","displayName":"PS","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Personalized Follow Up","displayName":"Personalized Follow Up","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Email Campaign ID","displayName":"Email Campaign ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Date Lead Enriched","displayName":"Date Lead Enriched","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Notes","displayName":"Notes","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-2680,-1040],"id":"d8563fc4-57f5-4192-8a93-e868e9591a5a","name":"Update Lead - Not Qualified","credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=You will receive raw text scraped from a company's LinkedIn page. Your task is to analyze **only** the \"About Us\" section, which can be identified by the following pattern:\n\n- Starts with: `\"Follow View all X employees Report this company About us...\"`\n- Ends before: `\"Website [company_website]\"`  \n  (The website URL will vary per company.)\n\nYour goal is to determine **if this company is a bad-fit SaaS company** that should be excluded from outreach.\n\n### **SaaS Companies to AVOID:**\n1. **Freemium or Free-First SaaS**  \n   - Indicators: Mentions of \"free forever,\" \"freemium model,\" \"self-serve,\" \"no credit card required.\"  \n   - Exclusions: SaaS with **clear sales-driven motion** (e.g., mentions of \"sales team,\" \"book a demo,\" \"enterprise customers\").  \n\n2. **Highly Technical or Developer-First SaaS**  \n   - Indicators: Mentions of \"API-first,\" \"open-source,\" \"developer platform,\" \"DevOps,\" \"for engineers by engineers.\"  \n   - Exclusions: If it explicitly targets **business users** like sales, HR, finance, or compliance teams.  \n\n3. **SaaS Marketplaces & Aggregators**  \n   - Indicators: Mentions of \"connecting buyers and sellers,\" \"marketplace,\" \"aggregator,\" \"directory of providers.\"  \n   - Exclusions: Vertical SaaS tools that solve **one industry-specific problem** instead of just listing vendors.  \n\n4. **VC-Backed Growth SaaS Focused on Product-Led Growth (PLG)**  \n   - Indicators: Mentions of \"viral adoption,\" \"user-led growth,\" \"no sales team,\" \"self-serve onboarding.\"  \n   - Exclusions: Sales-led SaaS with **dedicated SDRs or sales teams** for B2B deals.  \n\n5. **Ultra-Niche SaaS with No Clear Market Size**  \n   - Indicators: Hyper-specific tools with **small, obscure audiences** (e.g., \"software for dog breeders,\" \"AI-powered pigeon tracking\").  \n   - Exclusions: If the SaaS serves **a scalable industry** like logistics, legal, cybersecurity, or finance.  \n\n---\n\n### **Your Task:**\n1. **Does this company fall into any of the SaaS categories to avoid?**  \n   - If **yes**, return `\"yes\"` and specify which category applies.  \n   - If **no**, return `\"no\"`.  \n\n2. **Does this company explicitly sell to businesses (B2B)?**  \n   - Look for phrases like \"helping businesses,\" \"enterprise clients,\" \"corporate teams,\" \"for HR, sales, finance teams.\"  \n   - If it mainly targets consumers (B2C) or freelancers, return `\"no\"`.  \n\n3. **Extract the exact number of employees at the company.**  \n   - This number appears in the phrase: `\"Follow View all X employees\"`.  \n   - Extract **only the number X** and return it as an integer.  \n\n---\n\n### **Expected JSON Output:**\n```json\n{\n  \"is_bad_fit_saas\": \"yes/no\",\n  \"bad_fit_reason\": \"If yes, specify which category (e.g., 'Freemium SaaS', 'Marketplace SaaS').\",\n  \"is_b2b_focused\": \"yes/no\",\n  \"b2b_focus_explanation\": \"Brief reason why the company is or isn’t B2B-focused.\",\n  \"number_of_employees\": X\n}"},{"content":"={{ $json.plainText }}\n- Today's date: {{$now}}"}]},"jsonOutput":true,"options":{}},"id":"c24340f4-fd98-43c2-b2f2-0a6d5cac114e","name":"Saas Fit Qualifier","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.7,"position":[-3260,-1140],"credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"a5ec659a-7db9-4f47-97e1-b9a5365b9b0f","leftValue":"={{ $json.message.content.is_bad_fit_saas }}","rightValue":"yes","operator":{"type":"string","operation":"notEquals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-2900,-1140],"id":"553a6c32-24e3-4756-b082-51fc17d5c336","name":"Bad Fit?"},{"parameters":{"jsCode":"const inputData = $node[\"Scrape Homepage\"].json.data; // Reference the correct node\n\nfunction extractHeaderLinks(htmlString) {\n    const headerLinks = htmlString.match(/<a[^>]+href=[\"'](.*?)[\"'][^>]*>(.*?)<\\/a>/g);\n    \n    if (!headerLinks) return [];\n\n    return headerLinks.map(link => {\n        const urlMatch = link.match(/href=[\"'](.*?)[\"']/);\n        const textMatch = link.match(/>(.*?)<\\/a>/);\n        return {\n            text: textMatch ? textMatch[1].trim() : '',\n            url: urlMatch ? urlMatch[1] : ''\n        };\n    }).filter(item => item.url); // Remove any empty URLs\n}\n\nreturn extractHeaderLinks(inputData);\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1320,-1200],"id":"f3bea83e-e4fe-4940-abd7-588b5219e1ad","name":"Filter HTML","alwaysOutputData":true},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const htmlContent = $node[\"Scrape Homepage\"].json[\"data\"]; // Replace this with the field containing your HTML content\n\n// Function to strip HTML tags and clean the text\nconst extractPlainText = (html) => {\n    if (!html) return \"\";\n\n    // Remove script and style tags along with their content\n    const withoutScriptsAndStyles = html.replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, \"\")\n                                        .replace(/<style[\\s\\S]*?>[\\s\\S]*?<\\/style>/gi, \"\");\n\n    // Remove all remaining HTML tags\n    const strippedText = withoutScriptsAndStyles.replace(/<\\/?[^>]+(>|$)/g, \"\");\n\n    // Replace HTML entities with their plain-text equivalents\n    const decodedText = strippedText.replace(/&nbsp;/gi, \" \")\n                                    .replace(/&amp;/gi, \"&\")\n                                    .replace(/&lt;/gi, \"<\")\n                                    .replace(/&gt;/gi, \">\")\n                                    .replace(/&quot;/gi, \"\\\"\")\n                                    .replace(/&#39;/gi, \"'\");\n\n    // Replace multiple spaces, tabs, and newlines with a single space\n    const cleanedText = decodedText.replace(/\\s+/g, \" \").trim();\n\n    return cleanedText;\n};\n\n// Call the function to process the HTML content\nconst plainText = extractPlainText(htmlContent);\n\n// Return the plain text as the output of this node\nreturn {\n    plainText: plainText,\n};\n\n"},"id":"67b6ef05-61ed-40cf-8dd7-b643ba04181c","name":"Remove HTML From Homepage","type":"n8n-nodes-base.code","typeVersion":2,"position":[-1520,-1200]},{"parameters":{"jsCode":"const items = $input.all();\n\nconst cleanText = (html) => {\n    return html\n        .replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, '')  // Remove scripts\n        .replace(/<style[\\s\\S]*?>[\\s\\S]*?<\\/style>/gi, '')    // Remove styles\n        .replace(/<!--[\\s\\S]*?-->/g, '')                     // Remove comments\n        .replace(/<\\/?[^>]+(>|$)/g, '')                      // Remove HTML tags\n        .replace(/\\s+/g, ' ')                                // Normalize whitespace\n        .trim();\n};\n\nconst updatedItems = items.map((item) => {\n    const data = item.json.data.map(cleanText);\n    return { ...item.json, data };\n});\n\nreturn updatedItems;\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-920,-920],"id":"f186d85b-3ff2-4646-b9b5-024a0ed02ff3","name":"Filter HTML From Webpage"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"56718f79-40c1-4e89-9b24-abba356953f0","leftValue":"={{ $json.message.content.pricing_urls }}","rightValue":"","operator":{"type":"array","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-560,-1200],"id":"edec8979-c3ff-4a3f-a87b-350041a61445","name":"Pricing URL?"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=### **Optimized Prompt for SaaS Pricing Page Analysis**  \n\n```plaintext\nYou will receive raw text scraped from a company's **pricing page(s)**. Your task is to analyze the pricing details and determine if the company is a **good lead for outbound lead generation** based on its pricing model.\n\n### **SaaS Companies to AVOID Based on Pricing:**\n1. **Freemium or Free-First SaaS**  \n   - Indicators: Mentions of \"free forever,\" \"freemium model,\" \"self-serve,\" \"no credit card required,\" \"free for individuals,\" or \"100% free.\"  \n   - Exclusions: SaaS with **enterprise pricing tiers** or mentions of \"contact sales for pricing.\"\n\n2. **Low-Ticket SaaS (Under $50 per month per user)**  \n   - Indicators: Pricing tiers showing plans like \"$9/month,\" \"$19/user,\" or anything **under $50/month per user**.  \n   - Exclusions: SaaS that sells **multi-user or enterprise plans** with **annual pricing above $1,000.**\n\n3. **Self-Serve SaaS With No Sales Process (Product-Led Growth - PLG)**  \n   - Indicators: \"Start for free,\" \"Upgrade anytime,\" \"Self-serve onboarding,\" \"No sales calls needed.\"  \n   - Exclusions: SaaS with **\"Request a Demo\" or \"Enterprise Plan\"** mentions.\n\n4. **SaaS Marketplaces or Aggregators**  \n   - Indicators: Pricing for **listing services, transaction fees, or vendor subscriptions** (e.g., \"$29 per listing,\" \"Marketplace transaction fee of 5%\").  \n   - Exclusions: If it offers **standalone SaaS products** rather than just an aggregator.\n\n---\n\n### **Your Task:**\nAnalyze the scraped text and return a structured JSON object with the following details:\n\n1. **Is this a bad-fit SaaS company based on pricing?**  \n   - If **yes**, return `\"yes\"` and specify **which category applies**.  \n   - If **no**, return `\"no\"`.  \n\n2. **What is the lowest listed price on the page (if available)?**  \n   - Extract the **lowest** pricing value from the text (e.g., \"$9/month,\" \"$49 per user\").  \n   - If no price is found, return `\"N/A\"`.  \n\n3. **Does this company offer enterprise or sales-led pricing?**  \n   - Look for phrases like **\"Contact Sales,\" \"Request a Demo,\" \"Custom Enterprise Plans.\"**  \n   - If found, return `\"yes\"`; otherwise, return `\"no\"`.  \n\n4. **Does the pricing model indicate that the company relies primarily on self-service?**  \n   - If mentions of **\"Sign up instantly,\" \"Self-serve,\" \"No sales calls needed,\"** or similar are present, return `\"yes\"`.  \n   - Otherwise, return `\"no\"`.  \n\n---\n\n### **Expected JSON Output:**\n```json\n{\n  \"is_bad_fit_saas\": \"yes/no\",\n  \"bad_fit_reason\": \"If yes, specify which category (e.g., 'Freemium SaaS', 'Low-Ticket SaaS').\",\n  \"lowest_price\": \"Extracted lowest price (e.g., '$19/month') or 'N/A' if not found.\",\n  \"has_enterprise_pricing\": \"yes/no\",\n  \"is_self_serve_saas\": \"yes/no\"\n}\n```\n\n---\n\n### **Example Input (Scraped Pricing Page Text):**\n```\nStarter Plan: $9/month\nPro Plan: $39/month\nEnterprise Plan: Contact sales for pricing.\n```\n\n### **Expected Output:**\n```json\n{\n  \"is_bad_fit_saas\": \"yes\",\n  \"bad_fit_reason\": \"Low-Ticket SaaS\",\n  \"lowest_price\": \"$9/month\",\n  \"has_enterprise_pricing\": \"yes\",\n  \"is_self_serve_saas\": \"no\"\n}\n```\n\n---\n\n### **Why This is the Best Possible Prompt:**\n✅ **More precise filtering**: It distinguishes between self-serve models and sales-driven SaaS.  \n✅ **Faster, cleaner output**: Every response is structured and actionable.  \n✅ **Eliminates edge cases**: Even if pricing is unclear, it flags self-service reliance.  \n✅ **Better decision-making**: The `\"has_enterprise_pricing\"` flag allows leads to be saved even if low-ticket plans exist.  \n\nThis version ensures that your **lead gen outreach is laser-targeted toward high-value SaaS companies.** 🚀 Let me know if you need tweaks!","role":"system"},{"content":"=Input: {{ $('Remove HTML From Homepage').first().json.plainText }}, {{ $json.data[0] }}, {{ $json.data[1] }}, {{ $json.data[2] }}"}]},"jsonOutput":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[-720,-920],"id":"bcd6d124-25af-409d-877d-4acbc8a7a759","name":"Determine Pricing","credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7f2ff345-3ed3-4a28-8b84-771592d62826","leftValue":"={{ $json.message.content.is_bad_fit_saas }}","rightValue":"no","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-360,-920],"id":"637ff226-32a9-4116-adae-25a323374944","name":"Low Ticket?"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"4e25e642-5664-4e24-af37-7760810ceb49","leftValue":"={{ $('Analyze Company LinkedIn').item.json.message.content[\"Business Operations and Market Presence\"][\"Recent Funding Rounds\"] }}","rightValue":"not specified","operator":{"type":"string","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2640,-1440],"id":"18ded698-9efa-4029-8eea-279d44199ec3","name":"Funding?1"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=\n### **Prompt: Extract Structured Company Variables for Cold Outreach**  \n\nExtract the following structured company variables from the provided LinkedIn profile text. The extracted values must be **clear, concise, and highly personalized**, ensuring that when they are inserted into the sentence below, they feel **tailored, relevant, and engaging** to the recipient:\n\n> **We help [CompanyOverview] SaaS teams land meetings with [ICPofLead] dealing with [PainPointLeadSolves], using AI-driven outreach that delivers decision-makers, not just replies.\n\nFor another [PrimaryServices] SaaS, we booked 37 calls in a month—12 converted within 30 days, adding $83K in revenue.**\n\n### **Guidelines for Extraction & Personalization:**  \n- **Make it feel like a human wrote it.** The phrasing should be smooth, natural, and sound like a real cold email.  \n- **Ensure relevance to the lead.** The output must reflect what matters to them—their niche, challenges, and goals.  \n- **No vague or empty outputs.** If information is unclear, **infer the closest logical answer based on context** rather than returning \"not listed\" unless absolutely necessary.  \n- **Keep it concise.** Each value should be short but descriptive enough to make an impact.  \n\n---\n\n### **Updated Variables to Extract & Formatting Rules:**  \n\n#### **1. Title of lead at company** \n- The title or position of the lead at company. Must be shortened if possible (eg. CEO not Chief Executive Officer, BD not Business Development)  Must fit: **I noticed you're [title] at company** \n\n#### **2. Duration at company** \n- How long has the lead worked at the company. If close to or over 10 years, the refer to time in decades (eg. 1 year, 5 years, almost a decade, over 2 decades, etc) Must fit: **I saw you've been working at company for [duration]** \n\n#### **3. CompanyOverview**  \n- A **short, compelling description** of the company’s **core expertise**, framed in a way that fits naturally into the sentence.  \n- **3 words maximum.** Must fit: **We help [CompanyOverview] SaaS teams**  \n\n#### **4. ICPofLead**  \n- The **ideal customer profile (ICP)**, expressed as a **specific, compelling audience** that fits naturally in the sentence.  \n- **4 words maximum.** Must fit: **meetings with [ICPofLead] dealing with [PainPointLeadSolves]**  \n\n#### **5. PainPointLeadSolves**  \n- The **core problem** the company helps solve, framed **as something the prospect deeply cares about.**  \n- **5 words maximum.** Must fit: **meetings with [ICPofLead] dealing with [PainPointLeadSolves]**  \n\n#### **6. PrimaryServices**  \n- The **main service offering**, phrased to **sound valuable and high-impact** rather than just a category.  \n- **4 words maximum.** Must fit: **For another [PrimaryServices] SaaS**  \n\n#### **5. Industry and vertical**  \n- The **exact industry and vertical the company operates in**, phrased naturally.  \n- Must fit: **\"With [Industry] becoming more competitive…\"**  (e.g \"With [construction software development] becoming more competitive\")\n\n---\n\n### **Final JSON Output Format:**\n\njson\n{\n\"companyName\":\"...\",\n\"title\":\"...\",\n\"duration\":\"...\",\n\"companyOverview\": \"...\",\n\"ICPofLead\": \"...\",\n\"painPointLeadSolves\": \"...\",\n\"primaryServices\": \"...\",\n\"industry\": \"...\"\n}\n\n\n\n-------\n\n### **Prompt: Extract Structured Company Variables for Cold Outreach**  \n\nExtract the following structured company variables from the provided LinkedIn profile text. The extracted values must be **clear, concise, and highly personalized**, ensuring that when they are inserted into the sentence below, they feel **tailored, relevant, and engaging** to the recipient:\n\n> **\"We help [CompanyOverview] SaaS teams land meetings with [ICPofLead] dealing with [PainPointLeadSolves], For another [PrimaryServices] SaaS, we booked X calls.\"**\n\n### **Guidelines for Extraction & Personalization:**  \n- **Make it feel like a human wrote it.** The phrasing should be smooth, natural, and sound like a real cold email.  \n- **Ensure relevance to the lead.** The output must reflect what matters to them—their niche, challenges, and goals.  \n- **No vague or empty outputs.** If information is unclear, **infer the closest logical answer based on context** rather than returning \"not listed\" unless absolutely necessary.  \n- **Keep it concise.** Each value should be short but descriptive enough to make an impact.  \n\n\n### Rules \n- All output should be in lower case\n- The extracted details must be refering to this compamy: {{ $('Current Lead').item.json.rawCompanyName }}\n- \"companyName\", must be ","role":"system"},{"content":"=Company Linkedin:\n{{ $('Company Linkedin Stringify').item.json.companyLinkedin }}\n\nPersonal Linkedin:\n{{ $('Personal Linkedin Stringify').item.json.personalLinkedin }}\n"}]},"jsonOutput":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1680,-1440],"id":"bc34fc61-4aec-4502-99bb-e1cc802eed1a","name":"Determine Variables,1","credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"You are an expert in refining company names for everyday use in professional email communication. When given a company name, extract and output only the core term that employees and customers naturally use—stripping away legal designations (like \"LLC,\" \"Inc.,\" \"Ltd.\") and extraneous suffixes (such as \"and Co\" or similar). Ensure the resulting name is concise, informal, and exactly as it would be referred to in day-to-day conversation.\n\n**Note:** Output only the cleaned company name.","role":"system"},{"content":"=Scraped Company Name: {{ $('Current Lead').item.json.rawCompanyName }}\nDomain Name: {{ $('Current Lead').item.json.companyWebsite }}\n\nOutput: \nAlways output in the following JSON format\n\n{\"cleanedCompanyName\":\"\"}"}]},"jsonOutput":true,"options":{}},"id":"afee60f6-a2c6-487e-b822-8bab1c74170c","name":"Clean Company Name,1","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.7,"position":[2020,-1440],"credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"operation":"update","base":{"__rl":true,"value":"appJhNlGK8yWq6XQr","mode":"list","cachedResultName":"EffiSys | Leads","cachedResultUrl":"https://airtable.com/appJhNlGK8yWq6XQr"},"table":{"__rl":true,"value":"tblFJtYun0KM3Pq1r","mode":"list","cachedResultName":"Leads","cachedResultUrl":"https://airtable.com/appJhNlGK8yWq6XQr/tblFJtYun0KM3Pq1r"},"columns":{"mappingMode":"defineBelow","value":{"Start Lead Enrichment":false,"id":"={{ $('Pull Lead From Airtable,').item.json.id }}","Lead Status":"Cold","Company Name":"={{ $('Clean Company Name,1').item.json.message.content }}","Summary":"={{ $('Analyze Company LinkedIn.1').item.json.message.content }}","Personalization":"={{ $json.message.content.cold_email_opener }}","Date Lead Enriched":"={{ new Date().toISOString().split('T')[0] }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true},{"id":"First Name","displayName":"First Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Full Name","displayName":"Full Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Start Lead Enrichment","displayName":"Start Lead Enrichment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"boolean","readOnly":false,"removed":false},{"id":"Lead Status","displayName":"Lead Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Lead Yet to be Enriched","value":"Lead Yet to be Enriched"},{"name":"Cold","value":"Cold"},{"name":"Interested - RtS","value":"Interested - RtS"},{"name":"Interested - MiN","value":"Interested - MiN"},{"name":"Interested - CN","value":"Interested - CN"},{"name":"Interested - FUL","value":"Interested - FUL"},{"name":"Wrong Person - R","value":"Wrong Person - R"},{"name":"Not Interested - NI","value":"Not Interested - NI"},{"name":"Not Interested - NB","value":"Not Interested - NB"},{"name":"Not Interested - AUS","value":"Not Interested - AUS"},{"name":"Meeting Booked","value":"Meeting Booked"},{"name":"No Show","value":"No Show"},{"name":"Awaiting Proposal","value":"Awaiting Proposal"},{"name":"Proposal Sent","value":"Proposal Sent"},{"name":"Closed","value":"Closed"},{"name":"Lost - U/DNC","value":"Lost - U/DNC"},{"name":"Not Qualified","value":"Not Qualified"}],"readOnly":false,"removed":false},{"id":"Email Address","displayName":"Email Address","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Phone","displayName":"Phone","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Time At Company","displayName":"Time At Company","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Company Name","displayName":"Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Industry","displayName":"Industry","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Location","displayName":"Location","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"LinkedIn URL","displayName":"LinkedIn URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"LinkedIn Organization URL","displayName":"LinkedIn Organization URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Crunchbase URL","displayName":"Crunchbase URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Company Website","displayName":"Company Website","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Summary","displayName":"Summary","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Posts","displayName":"Posts","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Personalization","displayName":"Personalization","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Instantly Camp. ID","displayName":"Instantly Camp. ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Date Lead Enriched","displayName":"Date Lead Enriched","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"921ae00f-f1da-4f9f-a58b-4dc5d9e00ee1","name":"Update Enriched, 1","type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[3560,-1440],"credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}}},{"parameters":{"method":"POST","url":"https://api.instantly.ai/api/v1/lead/add","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"api_key\": \"[INPUT YOUR API HERE]\",\n  \"campaign_id\": \"{{ $('Pull Lead From Airtable,').item.json['Instantly Camp. ID'] }}\",\n  \"skip_if_in_workspace\": false,\n  \"skip_if_in_campaign\": true,\n  \"leads\": [\n    {\n      \"email\": \"{{ $('Pull Lead From Airtable,').item.json['Email Address'] }}\",\n      \"first_name\": \"{{ $('Pull Lead From Airtable,').item.json['First Name'] }}\",\n      \"last_name\": \"{{ $('Pull Lead From Airtable,').item.json['Full Name'].split(' ').slice(-1)[0] }}\",\n      \"company_name\": \"{{ $('Clean Company Name,1').item.json.message.content }}\",\n      \"personalization\": \"\",\n      \"phone\": \"\",\n      \"website\": \"\",\n      \"custom_variables\": {\n        \"CompanyOverview\": \"{{ $('Determine Variables,1').item.json.message.content.CompanyOverview }}\",\n        \"ICPofLead\": \"{{ $('Determine Variables,1').item.json.message.content.ICPofLead }}\",\n        \"PainPointLeadSolves\": \"{{ $('Determine Variables,1').item.json.message.content.PainPointLeadSolves }}\",\n        \"PrimaryServices\": \"{{ $('Determine Variables,1').item.json.message.content.PrimaryServices }}\",\n        \"Industry\":\"{{ $('Determine Variables,1').item.json.message.content.Industry }}\"\n      }\n    }\n  ]\n}\n","options":{}},"id":"bd7bb73c-0716-42e9-a6ba-97fc3fe8933f","name":"Update Lead to Instantly,1","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[3340,-1440]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"8a723b17-b46e-4c1c-b051-e410bd3a101e","leftValue":"={{ $json.status }}","rightValue":"not ready","operator":{"type":"string","operation":"notEquals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-2740,-3280],"id":"82bf06ae-c37e-439c-8abe-4d7f9882038a","name":"If1"},{"parameters":{"content":"Link to Apify scraper: https://console.apify.com/actors/3de5DRuKU05FLhk22/input","height":80,"width":420},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-3780,-3400],"id":"392e5f28-377d-4a16-8a61-58323fe428b5","name":"Sticky Note2"},{"parameters":{"jsCode":"return [{\n  mergedData: items.map(item => item.json.url).join(\", \")\n}];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1120,-1200],"id":"0c98ca23-b563-44c9-a90c-b88375e33efb","name":"Turn X Items Into "},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=You are given a list of **URLs extracted from a company's website**. Your task is to identify any URLs that are **likely to direct to a pricing page**.\n\n### **Selection Criteria for Pricing Pages:**  \nA URL is **likely a pricing page** if it includes keywords such as:  \n- `/pricing`  \n- `/plans`  \n- `/subscriptions`  \n- `/cost`  \n- `/fees`  \n- `/packages`  \n\n### **Output Requirements:**  \n- **Return only the paths of URLs that match the criteria** (e.g., `/pricing` instead of `https://example.com/pricing`).  \n- If **no pricing-related URLs are found, return an empty list**.  \n- The response must be formatted in **structured JSON**.\n\n### **Structured JSON Output Format:**  \n```json\n{\n  \"pricing_urls\": [\n    \"/<pricing-url-1>\",\n    \"/<pricing-url-2>\"\n  ]\n}\n```\n\n### **Example Input (List of URLs):**  \n```json\n[\n  \"https://example.com/about\",\n  \"https://example.com/pricing\",\n  \"https://example.com/platform\",\n  \"https://example.com/contact\",\n  \"https://example.com/subscriptions\"\n]\n```\n\n### **Expected Output:**  \n```json\n{\n  \"pricing_urls\": [\n    \"/pricing\",\n    \"/subscriptions\"\n  ]\n}\n```\n\n### **Important Notes:**  \n- The **domain should be stripped**, and only the path should be returned.  \n- The output must **strictly follow the structured JSON format above** with no extra text or explanations.  \n- If multiple pricing-related URLs exist, **return all matching entries**.  \n``` "},{"content":"={{ $json.mergedData }}"}]},"jsonOutput":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[-920,-1200],"id":"0a926706-ca48-437c-869b-a0c4c3b5d55d","name":"Determine Valuable URLs1","credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"fieldToSplitOut":"message.content.pricing_urls","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-1520,-920],"id":"00de5a85-c91e-4029-90c0-826dfd8e563b","name":"Split Out1"},{"parameters":{"url":"={{ $('Company URL + HTTP').first().json.companyWebsite }}{{ $json['message.content.pricing_urls'] }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1320,-920],"id":"7afc2adf-975e-4611-b4a0-ce5782d7aa2b","name":"HTTP Request1"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"data"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-1120,-920],"id":"462dc743-98a5-495b-984a-370faa810283","name":"Aggregate1"},{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-4340,-1060],"id":"1b20f328-d4d0-40f7-a12c-48d4d2c593b6","name":"When Executed by Another Workflow"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7540d0aa-8723-4dd0-9c11-f9ad60a4fa38","leftValue":"={{ $json.location }}","rightValue":"United States","operator":{"type":"string","operation":"contains"}}],"combinator":"or"},"options":{}},"id":"35d20cc2-636e-4c19-9dcd-7d51fd24b985","name":"US: Yes or No?","type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-3920,-1060]},{"parameters":{"url":"={{ $json.companyLinkedin }}","options":{}},"id":"42b79628-7c96-4e05-8135-3b396009b2e6","name":"LinkedIn Company Scraper","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3700,-1140]},{"parameters":{"operation":"deleteRecord","base":{"__rl":true,"value":"appjL8npjjAXSREaJ","mode":"list","cachedResultName":"NorthFlow CRM","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ"},"table":{"__rl":true,"value":"tblZlAcevMv5oyJzu","mode":"list","cachedResultName":"Leads","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ/tblZlAcevMv5oyJzu"},"id":"={{ $json.id }}"},"id":"fde0b158-0d50-4e89-a578-c8028b6f6184","name":"Delete Lead - Not US","type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-3700,-960],"credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}},"notes":"{{ $json.query.recordId }}"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const htmlContent = $node[\"LinkedIn Company Scraper\"].json[\"data\"]; // Replace this with the field containing your HTML content\n\n// Function to strip HTML tags and clean the text\nconst extractPlainText = (html) => {\n    if (!html) return \"\";\n\n    // Remove script and style tags along with their content\n    const withoutScriptsAndStyles = html.replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, \"\")\n                                        .replace(/<style[\\s\\S]*?>[\\s\\S]*?<\\/style>/gi, \"\");\n\n    // Remove all remaining HTML tags\n    const strippedText = withoutScriptsAndStyles.replace(/<\\/?[^>]+(>|$)/g, \"\");\n\n    // Replace HTML entities with their plain-text equivalents\n    const decodedText = strippedText.replace(/&nbsp;/gi, \" \")\n                                    .replace(/&amp;/gi, \"&\")\n                                    .replace(/&lt;/gi, \"<\")\n                                    .replace(/&gt;/gi, \">\")\n                                    .replace(/&quot;/gi, \"\\\"\")\n                                    .replace(/&#39;/gi, \"'\");\n\n    // Replace multiple spaces, tabs, and newlines with a single space\n    const cleanedText = decodedText.replace(/\\s+/g, \" \").trim();\n\n    return cleanedText;\n};\n\n// Call the function to process the HTML content\nconst plainText = extractPlainText(htmlContent);\n\n// Return the plain text as the output of this node\nreturn {\n    plainText: plainText,\n};\n\n"},"id":"951aecc2-3337-4d0b-b1b7-6541972327e1","name":"Remove HTML LinkedIn Page","type":"n8n-nodes-base.code","typeVersion":2,"position":[-3480,-1140]},{"parameters":{"assignments":{"assignments":[{"id":"ce235e95-ac53-4ee4-afc4-f5eee078c1e9","name":"id","value":"={{ $json.records[0].id }}","type":"string"},{"id":"4e150fba-0b8a-4efd-9fde-345f62ad6d8d","name":"fullName","value":"={{ $json.records[0].fields[\"Full Name\"] }}","type":"string"},{"id":"3f20cf02-802c-47c3-a287-7fefd2befefd","name":"firstName","value":"={{ $json.records[0].fields[\"First Name\"] }}","type":"string"},{"id":"1ea63e37-29b7-4d6d-85de-42bc0cea4981","name":"email","value":"={{ $json.records[0].fields[\"Email Address\"] }}","type":"string"},{"id":"f055fe47-ee6f-4fd5-b7f9-5c7d120636a1","name":"title","value":"={{ $json.records[0].fields.Title }}","type":"string"},{"id":"a642dee9-4cc0-4ef5-aeb6-a9f0ea0977cc","name":"rawCompanyName","value":"={{ $json.records[0].fields[\"Raw Company Name\"] }}","type":"string"},{"id":"6bb9e623-5dbf-473a-983a-f3ed2f630fd1","name":"industry","value":"={{ $json.records[0].fields.Industry }}","type":"string"},{"id":"f1390ca5-8476-43f0-b708-609137ebc2b3","name":"location","value":"={{ $json.records[0].fields[\"Company Location\"] }}","type":"string"},{"id":"d2a5e8fc-e311-4385-9455-8db33b32a23c","name":"personalLinkedin","value":"={{ $json.records[0].fields[\"Personal LinkedIn URL\"] }}","type":"string"},{"id":"1d517387-7e70-4f30-97be-89a2b8e86d8f","name":"companyLinkedin","value":"={{ $json.records[0].fields[\"Company Linkedin URL\"] }}","type":"string"},{"id":"88cb2c7c-440d-48bb-9dfd-40151629e074","name":"companyWebsite","value":"={{ $json.records[0].fields[\"Company Website\"] }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-4120,-1060],"id":"4b52ecf0-f91c-4f79-9011-83ddf208fd15","name":"Current Lead"},{"parameters":{"operation":"update","base":{"__rl":true,"value":"appjL8npjjAXSREaJ","mode":"list","cachedResultName":"NorthFlow CRM","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ"},"table":{"__rl":true,"value":"tblZlAcevMv5oyJzu","mode":"list","cachedResultName":"Leads","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ/tblZlAcevMv5oyJzu"},"columns":{"mappingMode":"defineBelow","value":{"id":"={{ $('Current Lead').item.json.id }}","Lead Status":"Not Qualified","Notes":"=Not B2B: {{ $json.message.content.b2b_focus_explanation }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"First Name","displayName":"First Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Full Name","displayName":"Full Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Start Lead Enrichment","displayName":"Start Lead Enrichment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"boolean","readOnly":false,"removed":true},{"id":"Lead Status","displayName":"Lead Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Yet to Be Enriched","value":"Yet to Be Enriched"},{"name":"Cold","value":"Cold"},{"name":"Warm","value":"Warm"},{"name":"Meeting Booked","value":"Meeting Booked"},{"name":"Proposal Sent","value":"Proposal Sent"},{"name":"Partner Closed","value":"Partner Closed"},{"name":"Lost","value":"Lost"},{"name":"Not Qualified","value":"Not Qualified"}],"readOnly":false,"removed":false},{"id":"Email Address","displayName":"Email Address","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Time at Company","displayName":"Time at Company","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Raw Company Name","displayName":"Raw Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Cleaned Company Name","displayName":"Cleaned Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Industry","displayName":"Industry","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Construction/trade SaaS ","value":"Construction/trade SaaS "}],"readOnly":false,"removed":true},{"id":"Company Location","displayName":"Company Location","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Personal LinkedIn URL","displayName":"Personal LinkedIn URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Linkedin URL","displayName":"Company Linkedin URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Website","displayName":"Company Website","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Meeting Date","displayName":"Meeting Date","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Google Meet URL","displayName":"Google Meet URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Lead Summary","displayName":"Lead Summary","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Icebreaker","displayName":"Icebreaker","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"PS","displayName":"PS","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Personalized Follow Up","displayName":"Personalized Follow Up","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Email Campaign ID","displayName":"Email Campaign ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Date Lead Enriched","displayName":"Date Lead Enriched","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Notes","displayName":"Notes","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-2460,-1140],"id":"092b823f-e60b-43ea-b594-990ab65c1381","name":"Update Lead - Not Qualified1","credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}}},{"parameters":{"operation":"update","base":{"__rl":true,"value":"appjL8npjjAXSREaJ","mode":"list","cachedResultName":"NorthFlow CRM","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ"},"table":{"__rl":true,"value":"tblZlAcevMv5oyJzu","mode":"list","cachedResultName":"Leads","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ/tblZlAcevMv5oyJzu"},"columns":{"mappingMode":"defineBelow","value":{"id":"={{ $('Current Lead').item.json.id }}","Lead Status":"Not Qualified","Notes":"=Too big: {{ $json.message.content.number_of_employees }} employees"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"First Name","displayName":"First Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Full Name","displayName":"Full Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Start Lead Enrichment","displayName":"Start Lead Enrichment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"boolean","readOnly":false,"removed":true},{"id":"Lead Status","displayName":"Lead Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Yet to Be Enriched","value":"Yet to Be Enriched"},{"name":"Cold","value":"Cold"},{"name":"Warm","value":"Warm"},{"name":"Meeting Booked","value":"Meeting Booked"},{"name":"Proposal Sent","value":"Proposal Sent"},{"name":"Partner Closed","value":"Partner Closed"},{"name":"Lost","value":"Lost"},{"name":"Not Qualified","value":"Not Qualified"}],"readOnly":false,"removed":false},{"id":"Email Address","displayName":"Email Address","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Time at Company","displayName":"Time at Company","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Raw Company Name","displayName":"Raw Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Cleaned Company Name","displayName":"Cleaned Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Industry","displayName":"Industry","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Construction/trade SaaS ","value":"Construction/trade SaaS "}],"readOnly":false,"removed":true},{"id":"Company Location","displayName":"Company Location","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Personal LinkedIn URL","displayName":"Personal LinkedIn URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Linkedin URL","displayName":"Company Linkedin URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Website","displayName":"Company Website","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Meeting Date","displayName":"Meeting Date","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Google Meet URL","displayName":"Google Meet URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Lead Summary","displayName":"Lead Summary","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Icebreaker","displayName":"Icebreaker","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"PS","displayName":"PS","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Personalized Follow Up","displayName":"Personalized Follow Up","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Email Campaign ID","displayName":"Email Campaign ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Date Lead Enriched","displayName":"Date Lead Enriched","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Notes","displayName":"Notes","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-2240,-1220],"id":"ac699f13-3922-48a0-bfef-0b9b2c15cb95","name":"Update Lead - Not Qualified2","credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"aa1f661a-fafb-4ea1-a996-9bbc29f649b6","leftValue":"={{ $json.error }}","rightValue":"","operator":{"type":"string","operation":"exists","singleValue":true}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-1820,-1440],"id":"8ff57745-6140-4dd5-b16e-8ff099761394","name":"Valid website"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=**Role:**  \nYou are an expert in professional business analysis and LinkedIn data extraction.  \n\n**Task:**  \nAnalyze the scraped LinkedIn profile data of a company and produce a **high-quality, detailed company report** for CRM upload. Your analysis must be **precise, fact-based, structured, and derived entirely from the provided data** while also including **recent company posts with timestamps**. Ensure that the **exact employee count is extracted instead of a company size range.**  \n\n---\n\n### **Output Structure:**  \nYour response must be a **single string titled \"Company LinkedIn\"** and divided into exactly **five** clearly labeled sections:  \n\n#### **1. Company Overview:**  \n- Provide a **concise yet comprehensive summary** of the company.  \n- Include the **official name, industry, headquarters location, and founding year** if available.  \n- Extract the **exact employee count** from the profile (e.g., \"20 employees\" instead of \"11-50 employees\"). Look for \"Follow View all X employees.\"\n- Summarize the company’s **mission statement** and its **core value proposition**.  \n- Highlight its **business type (Privately Held, Public, Nonprofit, etc.)**.  \n\n#### **2. Products, Services, and Technology:**  \n- Summarize the **company’s key offerings**, including **products, services, and technology**.  \n- List **notable software platforms, SaaS solutions, or proprietary technologies** the company uses or sells.  \n- If available, include any **strategic advantages or differentiators** (e.g., AI-powered, automation-focused, integration-ready).  \n\n#### **3. Business Operations and Market Presence:**  \n- List the company’s **primary office locations**, including headquarters and any additional branches.  \n- Summarize any **recent funding rounds, major investments, or key investors** if applicable.  \n- Mention any **notable partnerships, affiliations, or alliances** that contribute to their market position.  \n- If applicable, highlight **major clients, certifications, awards, or industry recognitions**.  \n\n#### **4. Recent Announcements and Market Activity:**  \n- Summarize **recent press releases, product launches, partnerships, or growth milestones**.  \n- If hiring data is available, note whether the company is **actively recruiting**.  \n- Capture any **noteworthy social engagement** (e.g., G2 rankings, LinkedIn hiring growth, conference participation).  \n\n#### **5. Company Posts (Including Timestamps):**  \n- Extract all **company posts**, including **the date they were published**.  \n- Summarize the **core message** of each post.  \n- Include links if available.  \n\n**Format for Posts Section:**  \n📅 **[Date]** - **Post Title and FULL Post**  \nPost ALL content.  \n\n---\n\n### **Additional Guidelines:**  \n- **Extract and use the exact employee count** instead of a company size range.  \n- **The analysis must be concise, fact-based, and structured** without assumptions or filler content.  \n- **Use exact data where available** (e.g., \"Founded in 2020\" instead of \"several years ago\").  \n- **Maintain a professional tone and structured formatting** for easy CRM readability.  \n\n\n### **Rules:**  \n- If no content is avaliable, output null\n\n### **Output**\nAlways output in the following JSON format:\n\n{\n  \"Company Overview\": {\n    \"Official Name\": \"\",\n    \"Industry\": \"\",\n    \"Headquarters Location\": \"\",\n    \"Founding Year\": \"\",\n    \"Employee Count\": \"\",\n    \"Mission Statement\": \"\",\n    \"Core Value Proposition\": \"\",\n    \"Business Type\": \"\"\n  },\n  \"Products, Services, and Technology\": {\n    \"Key Offerings\": [],\n    \"Technologies\": [],\n    \"Strategic Advantages\": []\n  },\n  \"Business Operations and Market Presence\": {\n    \"Primary Office Locations\": \"\",\n    \"Recent Funding Rounds\": \"\",\n    \"Notable Partnerships\": \"\",\n    \"Major Clients\": \"\",\n    \"Certifications & Awards\": \"\"\n  },\n  \"Recent Announcements and Market Activity\": {\n    \"Recent Press Releases\": \"\",\n    \"Actively Recruiting\": \"\",\n    \"Noteworthy Social Engagement\": \"\"\n  },\n  \"Company Posts (Including Timestamps)\": {\n    \"Posts\": []\n  }\n}\n","role":"system"},{"content":"=Input: {{ $('Remove HTML LinkedIn Page').first().json.plainText }}"}]},"jsonOutput":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[40,-1440],"id":"7768be89-892a-4d1a-898f-87cff0292fa9","name":"Analyze Company LinkedIn","credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}},"notes":"#### **5. Company Posts (Including Timestamps):**  \n- Extract all **company posts**, including **the date they were published**.  \n- Summarize the **core message** of each post.  \n- Include links if available.  \n\n**Format for Posts Section:**  \n📅 **[Date]** - **Post Title and FULL Post**  \nPost ALL content.  "},{"parameters":{"method":"POST","url":"https://api.apify.com/v2/acts/VhxlqQXRwhW8H5hNV/run-sync-get-dataset-items","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/json"},{"name":"Authorization","value":"Bearer apify_api_0JMczG9Mud0RKCpIcA5p8HQQWhb37N3mBzny"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"username\": \"{{ $('Current Lead').item.json.personalLinkedin }}\"\n}","options":{"redirect":{"redirect":{}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[760,-1440],"id":"5508b4bf-785f-4919-9758-276c859d7cc9","name":"Apify - Personal Linkedin"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=### **Prompt: LinkedIn Personal Profile Data Extraction**  \n\nAnalyze the following **LinkedIn personal profile data** and extract **only verifiable information** from the text. The output should be written as a **cohesive and structured overview**, divided into 3 sections:  \n\n\n2. **Profile Overview** – Extract the **individual’s full name** as stated on the profile. Summarize their **core expertise and skills**, focusing on areas of specialization, professional strengths, and industry focus. Highlight any **major career achievements, awards, or significant contributions** explicitly mentioned. If stated, include their **aspirations, long-term career goals, and professional ambitions**. If the profile contains information about their **personal mission, values, or guiding principles**, integrate those as well. Finally, describe their **unique value proposition**—what differentiates them in their field, whether it’s **technical expertise, leadership, or strategic vision**.  \n\n3. **Experience Summary** – Extract and provide a structured summary of the individual's **current job title, company, and tenure** as stated on their profile. Describe their **responsibilities, leadership role, and contributions to business growth** based on the text. If listed, include **previous positions and career trajectory**, showing how they have progressed over time. Mention **seniority level** (executive, management, specialist) if explicitly stated. Highlight any **key projects, deals, or initiatives** they have led or contributed to. If the profile contains details about their **industry background or sector expertise**, integrate that as well.  \n\n4. **Education & Training** – Extract and list the **individual’s academic background, degrees earned, and universities attended** as displayed on their profile. Include **fields of study and specializations** relevant to their industry. If additional **certifications, executive programs, or professional development courses** are mentioned, summarize those as well. If no education details are provided, state **\"Not mentioned in the text.\"** instead of making assumptions.  \n\nThe response should be **fact-based, clearly structured, and free from assumptions or interpretations**. **Do not fabricate or infer missing details**—only include what is explicitly stated in the text.  \n\n### **Output Format:**  \nAlways output in JSON format:\n\n{\n  \"Profile Overview\": \"Write a structured paragraph containing the full name, core expertise, skills, major career achievements, aspirations, professional goals, personal mission, values, and unique value proposition.\",\n  \"Experience Summary\": \"Write a structured paragraph detailing their current role, responsibilities, tenure, contributions, career progression, seniority level, and key projects or business initiatives.\",\n  \"Education & Training\": \"Write a structured paragraph listing degrees, universities, specializations, and certifications. If no education details are provided, state \\\"Not mentioned in the text.\\\"\"\n}\n\n\n### **Rules**  \n- Do **not** include bullet points—write in **clear, structured paragraphs** for readability.  \n- Avoid redundancy—**keep it concise yet informative**.  \n- If a specific detail is not explicitly provided, state **\"Not mentioned in the text.\"** Do **not** add extra commentary or inferred details.  \n- **Extract text exactly as written** in the profile; do not paraphrase or reword personal descriptions.  ","role":"system"},{"content":"=Personal LinkedIn Data:\n{{ $json.personalLinkedin }}\n\nToday's date: {{ $now }}"}]},"jsonOutput":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1180,-1440],"id":"dc186d68-8719-4925-8031-e8b6e8633c9e","name":"Analyze Personal LinkedIn1","credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"jsCode":"const items = $input.all();\nconst text = items.map((item) => JSON.stringify(item.json)).join(\" \");\nconst personalLinkedin = text; // or whatever value you want to assign\n\nreturn { json: { personalLinkedin } };"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[980,-1440],"id":"d96c8da2-1942-4842-94a5-c4fbd180480a","name":"Personal Linkedin Stringify"},{"parameters":{"jsCode":"const items = $input.all();\nconst text = items.map((item) => JSON.stringify(item.json)).join(\" \");\nconst companyLinkedin = text; // or whatever value you want to assign\n\nreturn { json: { companyLinkedin } };\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[400,-1440],"id":"7835ab73-c09a-4fc8-ab20-fe6bd7efbdc5","name":"Company Linkedin Stringify"},{"parameters":{"assignments":{"assignments":[{"id":"3542ffaf-78d0-4c22-be9f-b305a0ce0f48","name":"companyName","value":"={{ $json.message.content.cleanedCompanyName }}","type":"string"},{"id":"a68efef9-372b-4a9d-a6ba-1d3b834e350b","name":"leadTitle","value":"={{ $('Determine Variables,1').item.json.message.content.title }}","type":"string"},{"id":"e26223ec-d94f-4d36-af7e-df74a0e1374e","name":"leadDuration","value":"={{ $('Determine Variables,1').item.json.message.content.duration }}","type":"string"},{"id":"6bb8322d-9449-4170-ba1d-e91a68f741a5","name":"companyOverview","value":"={{ $('Determine Variables,1').item.json.message.content.companyOverview }}","type":"string"},{"id":"0c3a7cc9-2c53-4d1d-a8c0-23cf3b7843c8","name":"companyICP","value":"={{ $('Determine Variables,1').item.json.message.content.ICPofLead }}","type":"string"},{"id":"0fefe52c-7b19-4249-accf-dd9f8bbbb5fc","name":"companyICPpainPointLeadSolution","value":"={{ $('Determine Variables,1').item.json.message.content.painPointLeadSolves }}","type":"string"},{"id":"1bbf4ac3-17e5-45b2-81bf-309f5f14b37b","name":"companyPrimaryServices","value":"={{ $('Determine Variables,1').item.json.message.content.primaryServices }}","type":"string"},{"id":"1b481f1f-7521-462f-8cd3-18c432204d43","name":"companyIndustry","value":"={{ $('Determine Variables,1').item.json.message.content.industry }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[2360,-1440],"id":"da0d215f-5e43-4ac6-87cf-cf7087595f62","name":"customVariables"},{"parameters":{"content":"## Company Linkedin ","height":300,"width":820,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-260,-1540],"typeVersion":1,"id":"b895dc70-9e78-4392-b6a6-792267eb8f09","name":"Sticky Note1"},{"parameters":{"content":"## Personal Linkedin","height":300,"width":820,"color":7},"type":"n8n-nodes-base.stickyNote","position":[680,-1540],"typeVersion":1,"id":"3980bd68-ef9c-40f3-ba4b-62e30979fe4e","name":"Sticky Note4"},{"parameters":{"content":"## Custom Variables","height":300,"width":940,"color":7},"type":"n8n-nodes-base.stickyNote","position":[1600,-1540],"typeVersion":1,"id":"ce99a1bd-c098-4530-8393-ea9b157247dd","name":"Sticky Note5"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=You are a Writing Specialist with expertise in business, subtle persuasion, and psychology.","role":"system"},{"content":"=You are an expert in structured text generation. Your task is to correctly insert the custom variables provided into the following templates while ensuring it sounds smooth and natural.\n\n\n## Templates\n\n{\"iceBreaker\":\"hey {name}, saw you've been {title} at {company} for {duration} - love that you're helping {icp} with {pain point they solve}\"}\n\n{\"pain\": With the {company industry} getting more competitive, how are you currently handling lead sourcing and outreach at {shortened company name} - is it mostly manual, or have you automated parts of it?}\n\n\n\n## Output\nAlways output in athe following JSON format:\n\n{\n\"iceBreaker\":\"\",\n\"pain\":\"\"\n}"},{"content":"=## Custom variables\nUse these variables to generate the templates\n\nLead first name: {{ $('Current Lead').item.json.firstName }}\nLead Title: {{ $json.leadTitle }}\n\nCompany Name: {{ $json.companyName }}\nLead duration at company: {{ $json.leadDuration }}\nCompany overview: {{ $json.companyOverview }}\nCompany ICP: {{ $json.companyICP }}\nPain point company solves for ICP: {{ $json.companyICPpainPointLeadSolution }}\nCompany primary service: {{ $json.companyPrimaryServices }}\nCompany industry: {{ $json.companyIndustry }}"}]},"jsonOutput":true,"options":{}},"id":"ea53b569-5bb2-46f5-9381-bad5f658a1de","name":"Write Personalized Lines (No funding)","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.7,"position":[2900,-1320],"credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"You are a Writing Specialist with expertise in business, subtle persuasion, and psychology.","role":"system"},{"content":"=You are an expert in structured text generation. Your task is to use the input data, custom variables, and funding information provided,  to generate email sections following templates. Ensuring it sounds smooth and natural.\n\n\n## Input Data\nYou will receive the following details about a company's funding:  \n\n- Company Name: The name of the company.  \n- Funding Amount: The amount raised (e.g., \"$10M\", \"$50M Series B\").  \n- Funding Round: The round of funding (e.g., \"Seed\", \"Series A\", \"Series B\").  \n- Date of Funding: The approximate time of the funding event (e.g., \"last month\", \"Q4 2023\").  \n- Investors (if available): The names of key investors (e.g., \"Sequoia Capital, Andreessen Horowitz\").  \n\n\n\n## Templates\n\n# iceBreaker Template Examples\nDiffernt iceBreakers can be used depending on if in investor info is available, and how onld the funding round is.\n\n**With investors**: \n{\"iceBreaker\":\"hey {name}, congrats on raising {$amount} in your {funding round/series} with {investors name} - exciting times ahead for {company}!\"} \n\n**Without investors**: \n{\"iceBreaker\":\"hey {name}, congrats on the recently raised {$amount} in {funding round/series} - big milestone for {company}!\"}\n\n**Older funding round**: \n{\"iceBreaker\":\"hey {name}, noticed that you closed a {funding round/series} in {quater and year} - must be a big year for growth for {company}!\"} \n\n# pain Template Example\n{\"pain\":\"Love that you're helping {icp} with {pain point they solve}. Curious, how are you planning to scale your outbound efforts now?\n\n\n\n## **Rules:**  \n- The iceBreaker should acknowledge the funding event** in a natural, conversational way.  \n- Ensure **proper capitalization of the company name** (e.g., \"Acme Corp\" stays \"Acme Corp\").  \n- Keep the sentence **engaging but concise**, ensuring it reads like a natural cold email.  \n- If no investors are provided, exclude any mention of them.  \n- The response must be in **structured JSON format** as shown below.  \n\n\n## Output\nAlways output in athe following JSON format:\n\n{\n\"iceBreaker\":\"\",\n\"pain\":\"\"\n}\n\n\n\n\n\n### **Additional Notes:**  \n- **Personalized but not too casual**—aim for professional but engaging.  \n- **Ensure the company name is correctly capitalized**  \n- **Strictly return only the JSON object**—no extra text or formatting.  \n```"},{"content":"=## Custom variables\nUse these variables to generate the templates\n\nLead first name: {{ $('Current Lead').item.json.firstName }}\nLead Title: {{ $json.leadTitle }}\n\nCompany Name: {{ $json.companyName }}\nLead duration at company: {{ $json.leadDuration }}\nCompany overview: {{ $json.companyOverview }}\nCompany ICP: {{ $json.companyICP }}\nPain point company solves for ICP: {{ $json.companyICPpainPointLeadSolution }}\nCompany primary service: {{ $json.companyPrimaryServices }}\nCompany industry: {{ $json.companyIndustry }}\n\n\n## Funding Info\n\n{{ JSON.stringify($('Analyze Company LinkedIn').item.json.message.content['Business Operations and Market Presence']) }}\n\n{{ JSON.stringify($('Analyze Company LinkedIn').item.json.message.content['Recent Announcements and Market Activity']) }}"}]},"jsonOutput":true,"options":{}},"id":"f6ba254a-5ac5-4aff-8943-c72af5a44fdf","name":"Write Personalized Line (With funding)","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.7,"position":[2900,-1560],"credentials":{"openAiApi":{"id":"EtJ9FnxqrmpldhIX","name":"OpenAi account"}}},{"parameters":{"content":"Needs testing\n\nAdd proof line - \"we recently helped  similar [niche indsry] do x y z\n\nAdd ps","height":300,"width":320},"type":"n8n-nodes-base.stickyNote","position":[2860,-1740],"typeVersion":1,"id":"c41e9db2-1f87-4a5f-a6f5-587dd9464dc9","name":"Sticky Note6"},{"parameters":{"content":"Campaing needs to be setup in Smartlead"},"type":"n8n-nodes-base.stickyNote","position":[3380,-1600],"typeVersion":1,"id":"1e106dac-8275-4119-a816-5f4f0f8a21b3","name":"Sticky Note7"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-160,-1440],"id":"5555a2d3-5199-4380-b1b4-e8b74c581df0","name":"No Op"},{"parameters":{"url":"={{ $json.companyWebsite }}","options":{"allowUnauthorizedCerts":true,"redirect":{"redirect":{}}}},"id":"ba18b6e3-2bcc-46b5-855e-841b7cfe2bbd","name":"Scrape Homepage","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2040,-1440],"onError":"continueRegularOutput"},{"parameters":{"assignments":{"assignments":[{"id":"8c4023ba-7066-4fe4-95b8-5833306daae8","name":"companyWebsite","value":"={{(() => {\n  const website = $('Current Lead').item.json.companyWebsite;\n  const email = $('Current Lead').item.json.email;\n  \n  const url = website || email.split('@')[1];\n  \n  return url.startsWith('http://') || url.startsWith('https://') \n    ? url \n    : `https://${url}`;\n})()}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2240,-1440],"id":"5e74ef95-3f56-4de2-845e-8b6201420160","name":"Company URL + HTTP"},{"parameters":{"operation":"update","base":{"__rl":true,"value":"appjL8npjjAXSREaJ","mode":"list","cachedResultName":"NorthFlow CRM","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ"},"table":{"__rl":true,"value":"tblZlAcevMv5oyJzu","mode":"list","cachedResultName":"Leads","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ/tblZlAcevMv5oyJzu"},"columns":{"mappingMode":"defineBelow","value":{"id":"={{ $('Current Lead').item.json.id }}","Lead Status":"Not Qualified","Notes":"=Low ticket (<$50/month) with no enterprise offer - {{ $json.message.content.lowest_price }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"First Name","displayName":"First Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Full Name","displayName":"Full Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Start Lead Enrichment","displayName":"Start Lead Enrichment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"boolean","readOnly":false,"removed":true},{"id":"Lead Status","displayName":"Lead Status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Yet to Be Enriched","value":"Yet to Be Enriched"},{"name":"Cold","value":"Cold"},{"name":"Warm","value":"Warm"},{"name":"Meeting Booked","value":"Meeting Booked"},{"name":"Proposal Sent","value":"Proposal Sent"},{"name":"Partner Closed","value":"Partner Closed"},{"name":"Lost","value":"Lost"},{"name":"Not Qualified","value":"Not Qualified"}],"readOnly":false,"removed":false},{"id":"Email Address","displayName":"Email Address","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Time at Company","displayName":"Time at Company","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Raw Company Name","displayName":"Raw Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Cleaned Company Name","displayName":"Cleaned Company Name","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Industry","displayName":"Industry","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"Construction/trade SaaS ","value":"Construction/trade SaaS "}],"readOnly":false,"removed":true},{"id":"Company Location","displayName":"Company Location","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Personal LinkedIn URL","displayName":"Personal LinkedIn URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Linkedin URL","displayName":"Company Linkedin URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Company Website","displayName":"Company Website","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Meeting Date","displayName":"Meeting Date","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Google Meet URL","displayName":"Google Meet URL","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Lead Summary","displayName":"Lead Summary","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Icebreaker","displayName":"Icebreaker","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Pain","displayName":"Pain","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"PS","displayName":"PS","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Follow Up","displayName":"Follow Up","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Email Campaign ID","displayName":"Email Campaign ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Date Lead Enriched","displayName":"Date Lead Enriched","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":true},{"id":"Notes","displayName":"Notes","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-100,-800],"id":"eca66b94-2dfc-4f65-af39-e88bb7cffdd0","name":"Not Qualified - Low Ticket","credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}}},{"parameters":{"content":"Add PS into variables"},"type":"n8n-nodes-base.stickyNote","position":[1680,-1640],"typeVersion":1,"id":"46cbb5c1-6570-4df4-9de2-0c4e4da70682","name":"Sticky Note8"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-3740,-2540],"id":"833ae7e9-d4b8-4551-8382-b199fdf5dbd2","name":"When clicking ‘Test workflow’"},{"parameters":{"base":{"__rl":true,"value":"appjL8npjjAXSREaJ","mode":"list","cachedResultName":"NorthFlow CRM","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ"},"table":{"__rl":true,"value":"tblZlAcevMv5oyJzu","mode":"list","cachedResultName":"Leads","cachedResultUrl":"https://airtable.com/appjL8npjjAXSREaJ/tblZlAcevMv5oyJzu"},"id":"=","options":{}},"id":"eefb5562-284c-4075-8416-0b655aa37224","name":"Pull Lead From CRM","type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-3520,-2540],"credentials":{"airtableTokenApi":{"id":"TIgbpUAIHwmlxLOW","name":"Airtable Personal Access Token account"}},"notes":"{{ $json.query.recordId }}"},{"parameters":{"workflowId":{"__rl":true,"value":"1kz0UKfQPdXGYniM","mode":"list","cachedResultName":"CRM Automation"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-2400,-2460],"id":"c248f02b-3982-4e23-a369-e2ed5a0e1656","name":"Execute Workflow"},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[-2820,-2540],"id":"49b7b35d-113d-458f-b38c-a9481ccd6257","name":"Batch 1"},{"parameters":{},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-2180,-2460],"id":"0e96dee7-059d-4ad5-95b2-2832431138c8","name":"Wait 5sec","webhookId":"49329808-5ed3-42ea-b179-750aa21f8ec8"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"d7279da5-c9be-4d22-be6e-396874b3a0ac","leftValue":"={{ $json.records[0].fields[\"Start Lead Enrichment\"] }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[-3300,-2540],"id":"3e7cc776-2553-4e20-b3cf-c39522aefd2a","name":"Start Enrichment"},{"parameters":{"fieldToSplitOut":"records","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-3080,-2540],"id":"f14260d5-bcbc-4296-8596-73e7c6379816","name":"Split Out"},{"parameters":{"assignments":{"assignments":[{"id":"e4bc7257-0bed-452e-b525-0e824c7c7501","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"38ce0096-cb49-448b-9944-cda8e515efd8","name":"lead","value":"={{ $json.fields }}","type":"object"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2600,-2460],"id":"277efd5e-d8f8-4ecb-a2e5-d32b9fc4b6d1","name":"Edit Fields"},{"parameters":{"content":"## Start lead enrichment\n\nFuture - Send via webhook from Airtable (need business plan)\n\nAirtable Script:\n\nconst inputData = input.config()\n\nconst { recordId } = inputData;\n\nconst response = await fetch(“INPUT YOUR PRODUCTION WEBHOOK URL”+”?recordId=\"+recordId)\n\nconsole.log(response.status)\n\nNOTE: After pasting your webhook URL, manually remove the quotation marks and put them back. ","height":580,"width":2700,"color":6},"type":"n8n-nodes-base.stickyNote","position":[-4580,-2740],"typeVersion":1,"id":"a72a754d-4b46-4fcc-915c-1f21e260219b","name":"Sticky Note9"},{"parameters":{"content":"## Scrape leads from Apify\n\nFuture - remove duplicates from crm (way easier with Airtable vs G sheets)\n\nWorkflow propably mostly redundant as single node can wait for results from Apify\n\nRemove exact eamil duplicates, but keep same domains, unless they are a client.","height":580,"width":2700,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-4580,-3480],"typeVersion":1,"id":"9567946a-9ab9-426d-9f77-c77e473d4ff8","name":"Sticky Note10"},{"parameters":{"content":"Future - add in \"self\" selecting variables - see clearance other workflow"},"type":"n8n-nodes-base.stickyNote","position":[2240,-1860],"typeVersion":1,"id":"514f3388-6b90-4862-8a4a-1844fc679e23","name":"Sticky Note"}],"connections":{"Wait":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Merge":{"main":[[{"node":"Retrieve Dataset","type":"main","index":0}]]},"Verify Dataset Availability":{"main":[[{"node":"If1","type":"main","index":0}]]},"Retrieve Dataset":{"main":[[{"node":"Verify Dataset Availability","type":"main","index":0}]]},"Apollo Lead Scraper":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Remove Duplicates":{"main":[[{"node":"Add Leads to CRM","type":"main","index":0}]]},"B2B?":{"main":[[{"node":"<50?","type":"main","index":0}],[{"node":"Update Lead - Not Qualified1","type":"main","index":0}]]},"<50?":{"main":[[{"node":"Company URL + HTTP","type":"main","index":0}],[{"node":"Update Lead - Not Qualified2","type":"main","index":0}]]},"Saas Fit Qualifier":{"main":[[{"node":"Bad Fit?","type":"main","index":0}]]},"Bad Fit?":{"main":[[{"node":"B2B?","type":"main","index":0}],[{"node":"Update Lead - Not Qualified","type":"main","index":0}]]},"Filter HTML":{"main":[[{"node":"Turn X Items Into ","type":"main","index":0}]]},"Remove HTML From Homepage":{"main":[[{"node":"Filter HTML","type":"main","index":0}]]},"Filter HTML From Webpage":{"main":[[{"node":"Determine Pricing","type":"main","index":0}]]},"Pricing URL?":{"main":[[{"node":"No Op","type":"main","index":0}],[{"node":"Split Out1","type":"main","index":0}]]},"Determine Pricing":{"main":[[{"node":"Low Ticket?","type":"main","index":0}]]},"Low Ticket?":{"main":[[{"node":"No Op","type":"main","index":0}],[{"node":"Not Qualified - Low Ticket","type":"main","index":0}]]},"Funding?1":{"main":[[{"node":"Write Personalized Line (With funding)","type":"main","index":0}],[{"node":"Write Personalized Lines (No funding)","type":"main","index":0}]]},"Determine Variables,1":{"main":[[{"node":"Clean Company Name,1","type":"main","index":0}]]},"Clean Company Name,1":{"main":[[{"node":"customVariables","type":"main","index":0}]]},"If1":{"main":[[{"node":"Remove Duplicates","type":"main","index":0}],[{"node":"Wait","type":"main","index":0}]]},"Turn X Items Into ":{"main":[[{"node":"Determine Valuable URLs1","type":"main","index":0}]]},"Determine Valuable URLs1":{"main":[[{"node":"Pricing URL?","type":"main","index":0}]]},"Split Out1":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"HTTP Request1":{"main":[[{"node":"Aggregate1","type":"main","index":0}]]},"Aggregate1":{"main":[[{"node":"Filter HTML From Webpage","type":"main","index":0}]]},"US: Yes or No?":{"main":[[{"node":"LinkedIn Company Scraper","type":"main","index":0}],[{"node":"Delete Lead - Not US","type":"main","index":0}]]},"LinkedIn Company Scraper":{"main":[[{"node":"Remove HTML LinkedIn Page","type":"main","index":0}]]},"Remove HTML LinkedIn Page":{"main":[[{"node":"Saas Fit Qualifier","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Current Lead","type":"main","index":0}]]},"Current Lead":{"main":[[{"node":"US: Yes or No?","type":"main","index":0}]]},"Valid website":{"main":[[{"node":"No Op","type":"main","index":0}],[{"node":"Remove HTML From Homepage","type":"main","index":0}]]},"Analyze Company LinkedIn":{"main":[[{"node":"Company Linkedin Stringify","type":"main","index":0}]]},"Apify - Personal Linkedin":{"main":[[{"node":"Personal Linkedin Stringify","type":"main","index":0}]]},"Analyze Personal LinkedIn1":{"main":[[{"node":"Determine Variables,1","type":"main","index":0}]]},"Personal Linkedin Stringify":{"main":[[{"node":"Analyze Personal LinkedIn1","type":"main","index":0}]]},"Company Linkedin Stringify":{"main":[[{"node":"Apify - Personal Linkedin","type":"main","index":0}]]},"customVariables":{"main":[[{"node":"Funding?1","type":"main","index":0}]]},"Update Lead to Instantly,1":{"main":[[{"node":"Update Enriched, 1","type":"main","index":0}]]},"Write Personalized Lines (No funding)":{"main":[[{"node":"Update Lead to Instantly,1","type":"main","index":0}]]},"Write Personalized Line (With funding)":{"main":[[{"node":"Update Lead to Instantly,1","type":"main","index":0}]]},"No Op":{"main":[[{"node":"Analyze Company LinkedIn","type":"main","index":0}]]},"Scrape Homepage":{"main":[[{"node":"Valid website","type":"main","index":0}]]},"Company URL + HTTP":{"main":[[{"node":"Scrape Homepage","type":"main","index":0}]]},"When clicking ‘Test workflow’":{"main":[[{"node":"Pull Lead From CRM","type":"main","index":0}]]},"Pull Lead From CRM":{"main":[[{"node":"Start Enrichment","type":"main","index":0}]]},"Execute Workflow":{"main":[[{"node":"Wait 5sec","type":"main","index":0}]]},"Batch 1":{"main":[[],[{"node":"Edit Fields","type":"main","index":0}]]},"Wait 5sec":{"main":[[{"node":"Batch 1","type":"main","index":0}]]},"Start Enrichment":{"main":[[{"node":"Split Out","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"Batch 1","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Execute Workflow","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"id":"recJBucWub2nQZlRw","lead":{"Full Name":"Ryan","First Name":"Ryan","Start Lead Enrichment":true,"Lead Status":"Yet to Be Enriched","Email Address":"ryan@gmail.com","Raw Company Name":"Building Evolution Technologies Corp","Company Location":"Folsom, United States","Personal LinkedIn URL":"http://www.linkedin.com/in/nicolas-ciobanu-47202611","Company Linkedin URL":"http://www.linkedin.com/company/buildevo","Company Website":"buildevo.com"}}}]},"versionId":"34deef77-1396-4c18-877e-0a34b2aa9f25","triggerCount":0,"tags":[{"createdAt":"2025-03-23T15:36:20.843Z","updatedAt":"2025-03-23T15:36:20.843Z","id":"MjPn795QzUgRGSp2","name":"NorthFlow"},{"createdAt":"2025-03-23T15:44:22.440Z","updatedAt":"2025-03-23T15:44:22.440Z","id":"nPE42Vkiq42TPmfL","name":"Operations"}]}